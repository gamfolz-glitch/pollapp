{% load static %}
<!doctype html>
<html lang="ru" class="scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="description" content="{% block meta_description %}–°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –æ–ø—Ä–æ—Å–æ–≤. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ–ø—Ä–æ—Å—ã, —Å–æ–±–∏—Ä–∞–π—Ç–µ –æ—Ç–≤–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.{% endblock %}">
  <meta name="keywords" content="–æ–ø—Ä–æ—Å—ã, –æ–ø—Ä–æ—Å, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ, –∞–Ω–∫–µ—Ç–∞, —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–æ—Å–æ–≤">
  <meta name="author" content="–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–æ—Å–æ–≤">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="{% block og_title %}–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–æ—Å–æ–≤{% endblock %}">
  <meta property="og:description" content="{% block og_description %}–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ–ø—Ä–æ—Å—ã, —Å–æ–±–∏—Ä–∞–π—Ç–µ –æ—Ç–≤–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã{% endblock %}">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:title" content="{% block twitter_title %}–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–æ—Å–æ–≤{% endblock %}">
  <meta property="twitter:description" content="{% block twitter_description %}–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ–ø—Ä–æ—Å—ã, —Å–æ–±–∏—Ä–∞–π—Ç–µ –æ—Ç–≤–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã{% endblock %}">
  
  <title>{% block title %}–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–æ—Å–æ–≤{% endblock %}</title>
  
  <!-- Preconnect -->
  <link rel="preconnect" href="https://cdn.tailwindcss.com">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <noscript>
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
  </noscript>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="{% static 'css/custom.css' %}">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ —à—Ä–∏—Ñ—Ç–æ–≤ -->
  <style>
    body {
      font-family: 'Inter', 'DM Sans', system-ui, sans-serif;
    }
    h1, h2, h3, h4, h5, h6 {
      font-family: 'DM Sans', sans-serif;
      font-weight: 700;
    }
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
    @media (max-width: 640px) {
      .px-4.sm\:px-6.lg\:px-8 {
        padding-left: 1rem;
        padding-right: 1rem;
      }
      .py-8 {
        padding-top: 1.5rem;
        padding-bottom: 1.5rem;
      }
      .text-xl {
        font-size: 1.25rem;
      }
    }
  </style>

  {% block extra_head %}{% endblock %}
</head>

<body class="min-h-screen flex flex-col bg-gradient-to-br from-indigo-50 via-white to-purple-50 antialiased">
  <!-- Animated Background -->
  <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
    <div class="absolute -top-24 -right-24 w-96 h-96 bg-gradient-to-br from-indigo-200/30 to-transparent rounded-full blur-3xl animate-pulse"></div>
    <div class="absolute -bottom-24 -left-24 w-96 h-96 bg-gradient-to-tr from-purple-200/30 to-transparent rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
  </div>

  <!-- Header -->
  <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-custom border-b border-gray-200/70 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <!-- Logo -->
        <a href="/" class="flex items-center gap-3 group" aria-label="–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
          <div class="w-10 h-10 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center text-white shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300">
            <i class="fas fa-poll text-lg" aria-hidden="true"></i>
          </div>
          <span class="text-xl font-bold gradient-text">–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–æ—Å–æ–≤</span>
        </a>

        <!-- Desktop Navigation -->
        <nav class="hidden md:flex items-center gap-4" aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
          <a href="/" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200 flex items-center gap-2 group">
            <i class="fas fa-home group-hover:scale-110 transition-transform" aria-hidden="true"></i>
            <span class="hidden sm:inline">–ì–ª–∞–≤–Ω–∞—è</span>
          </a>

          {% if user.is_authenticated %}
            <a href="{% url 'polls:project_list' %}" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200 flex items-center gap-2 group">
              <i class="fas fa-clipboard-list group-hover:scale-110 transition-transform" aria-hidden="true"></i>
              <span class="hidden sm:inline">–ú–æ–∏ –æ–ø—Ä–æ—Å—ã</span>
            </a>

            <a href="{% url 'polls:project_new' %}" class="btn-gradient text-white px-4 py-2 rounded-xl font-semibold flex items-center gap-2 shadow-lg">
              <i class="fas fa-plus" aria-hidden="true"></i>
              <span class="hidden sm:inline">–°–æ–∑–¥–∞—Ç—å</span>
            </a>
            <form method="post" action="{% url 'logout' %}" class="inline-flex items-center my-auto">
              {% csrf_token %}
              <button type="submit" class="flex items-center gap-2 text-gray-600 hover:text-indigo-600 group">
                <i class="fas fa-sign-out-alt group-hover:scale-110 transition-transform" aria-hidden="true"></i>
                <span class="hidden sm:inline">–í—ã–π—Ç–∏</span>
                <span class="sm:hidden">({{ user.username }})</span>
              </button>
            </form>
          {% else %}
            <a href="{% url 'login' %}" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200 flex items-center gap-2 group">
              <i class="fas fa-sign-in-alt group-hover:scale-110 transition-transform" aria-hidden="true"></i>
              <span>–í–æ–π—Ç–∏</span>
            </a>
            <a href="{% url 'polls:signup' %}" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-xl transition-all duration-200 font-medium">
              –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
            </a>
          {% endif %}
        </nav>

        <!-- Mobile Menu Button -->
        <button id="mobile-menu-button" class="md:hidden p-2 rounded-lg text-gray-600 hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500" aria-expanded="false" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
          <i class="fas fa-bars text-xl"></i>
        </button>
      </div>

      <!-- Mobile Menu -->
      <div id="mobile-menu" class="hidden md:hidden bg-white/95 backdrop-blur-custom border-t border-gray-200/50 mt-2 py-4 rounded-b-xl shadow-lg absolute left-0 right-0 z-40 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <nav class="flex flex-col space-y-4" aria-label="–ú–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
          <a href="/" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200 flex items-center gap-2">
            <i class="fas fa-home" aria-hidden="true"></i>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
          </a>

          {% if user.is_authenticated %}
            <a href="{% url 'polls:project_list' %}" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200 flex items-center gap-2">
              <i class="fas fa-clipboard-list" aria-hidden="true"></i>
              <span>–ú–æ–∏ –æ–ø—Ä–æ—Å—ã</span>
            </a>

            <a href="{% url 'polls:project_new' %}" class="btn-gradient text-white px-4 py-2 rounded-xl font-semibold flex items-center gap-2 shadow-lg w-fit">
              <i class="fas fa-plus" aria-hidden="true"></i>
              <span>–°–æ–∑–¥–∞—Ç—å</span>
            </a>
            <form method="post" action="{% url 'logout' %}" class="inline-flex items-center">
              {% csrf_token %}
              <button type="submit" class="flex items-center gap-2 text-gray-600 hover:text-indigo-600">
                <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                <span>–í—ã–π—Ç–∏ ({{ user.username }})</span>
              </button>
            </form>
          {% else %}
            <a href="{% url 'login' %}" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200 flex items-center gap-2">
              <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
              <span>–í–æ–π—Ç–∏</span>
            </a>
            <a href="{% url 'polls:signup' %}" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-xl font-medium w-fit">
              –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
            </a>
          {% endif %}
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-6 md:py-8">
    <!-- Messages -->
    {% if messages %}
      <div class="space-y-3 mb-6 animate-slide-in" role="alert" aria-live="polite">
        {% for message in messages %}
          <div class="rounded-xl px-4 py-3 border-l-4 shadow-sm flex items-start gap-3
            {% if message.tags == 'error' %}
              bg-red-50 text-red-800 border-red-500
            {% elif message.tags == 'success' %}
              bg-emerald-50 text-emerald-800 border-emerald-500
            {% else %}
              bg-blue-50 text-blue-800 border-blue-500
            {% endif %}">
            <i class="fas mt-0.5
              {% if message.tags == 'error' %}fa-exclamation-triangle text-red-500
              {% elif message.tags == 'success' %}fa-check-circle text-emerald-500
              {% else %}fa-info-circle text-blue-500
              {% endif %}" aria-hidden="true"></i>
            <span class="text-sm sm:text-base">{{ message }}</span>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="mt-auto border-t border-gray-200/70 bg-white/60 backdrop-blur-custom py-6">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-xs sm:text-sm text-gray-600">
      <p>¬© 2025 ‚Äî –®–∫–æ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç</p>
    </div>
  </footer>

  <!-- Main JavaScript -->
  <script src="{% static 'js/main.js' %}" defer></script>

  <!-- Mobile Menu Toggle Script -->
  <script>
    const menuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    
    menuButton.addEventListener('click', () => {
      const isExpanded = menuButton.getAttribute('aria-expanded') === 'true';
      menuButton.setAttribute('aria-expanded', !isExpanded);
      mobileMenu.classList.toggle('hidden');
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
    document.addEventListener('click', (e) => {
      if (!menuButton.contains(e.target) && !mobileMenu.contains(e.target)) {
        mobileMenu.classList.add('hidden');
        menuButton.setAttribute('aria-expanded', 'false');
      }
    });
  </script>

  {% block extra_js %}{% endblock %}
</body>
</html>