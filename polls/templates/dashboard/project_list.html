{% extends "dashboard/base.html" %}

{% block dashboard_title %}–ú–æ–∏ –æ–ø—Ä–æ—Å—ã{% endblock %}

{% block content %}
  <div class="flex flex-between" style="margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; align-items: center;">
    <h1 style="margin: 0; font-size: 1.75rem; font-weight: 600; color: var(--text);">–ú–æ–∏ –æ–ø—Ä–æ—Å—ã</h1>
    <a href="/dashboard/project/new/" class="btn btn-primary" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.25rem;">
      <span>‚ûï</span> <span>–°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å</span>
    </a>
  </div>

  {% if polls %}
    <div class="grid grid-2" style="gap: 1.5rem;">
      {% for poll in polls %}
        <div class="card"
             style="
               display: flex;
               flex-direction: column;
               height: 100%;
               transition: transform 0.2s ease, box-shadow 0.2s ease;
               border-radius: 0.75rem;
               overflow: hidden;
             "
             onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.12)';"
             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.08)';">
          <div class="card-header" style="margin-bottom: 1rem;">
            <h3 class="card-title" style="margin: 0 0 0.5rem;">
              <a href="/dashboard/project/{{ poll.id }}/" style="text-decoration: none; color: inherit; display: block; padding: 0.25rem 0;">
                {{ poll.title }}
              </a>
            </h3>
            <span class="badge badge-primary" style="font-size: 0.85rem; padding: 0.35rem 0.65rem;">–ö–æ–¥: {{ poll.access_code }}</span>
          </div>

          {% if poll.description %}
            <p style="
              margin: 0 0 1.25rem;
              color: var(--text-light);
              font-size: 0.95rem;
              line-height: 1.5;
              font-style: italic;
              flex-grow: 1;
              overflow: hidden;
              display: -webkit-box;
              -webkit-line-clamp: 3;
              -webkit-box-orient: vertical;
              transition: color 0.2s ease;
            ">
              {{ poll.description }}
            </p>
          {% else %}
            <p style="
              margin: 0 0 1.25rem;
              color: var(--text-light);
              font-size: 0.95rem;
              line-height: 1.5;
              font-style: italic;
              flex-grow: 1;
              opacity: 0.6;
              transition: opacity 0.2s ease;
            ">
              –û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
            </p>
          {% endif %}

          <div style="
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: space-between;
            align-items: center;
            transition: padding 0.2s ease;
          ">
            <div class="flex" style="gap: 0.5rem; flex-wrap: wrap;">
              <a href="/dashboard/project/{{ poll.id }}/" class="btn btn-outline" style="font-size: 0.85rem; padding: 0.5rem 0.85rem;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</a>
              <a href="/dashboard/project/{{ poll.id }}/edit/" class="btn btn-outline" style="font-size: 0.85rem; padding: 0.5rem 0.85rem;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
              <a href="/dashboard/project/{{ poll.id }}/delete/" class="btn btn-danger" style="font-size: 0.85rem; padding: 0.5rem 0.85rem;">–£–¥–∞–ª–∏—Ç—å</a>
            </div>
            <a href="/p/{{ poll.access_code }}/" target="_blank" class="btn btn-secondary" style="font-size: 0.85rem; padding: 0.5rem 0.85rem;">–ü—Ä–æ—Å–º–æ—Ç—Ä</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="card empty-state"
         style="
           text-align: center;
           padding: 3rem 1.5rem;
           margin: 0 auto;
           max-width: 500px;
           border-radius: 0.75rem;
           background: var(--bg);
           transition: transform 0.2s ease;
         "
         onmouseover="this.style.transform='scale(1.02)';"
         onmouseout="this.style.transform='scale(1)';">
      <div style="font-size: 4rem; margin-bottom: 1rem;">üìù</div>
      <h2 style="margin: 0 0 1rem; font-size: 1.5rem; font-weight: 600; color: var(--text);">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ–ø—Ä–æ—Å–æ–≤</h2>
      <p style="margin: 0 0 1.5rem; color: var(--text-light); font-size: 1rem; line-height: 1.5;">
        –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –æ–ø—Ä–æ—Å –∏ –Ω–∞—á–Ω–∏—Ç–µ —Å–æ–±–∏—Ä–∞—Ç—å –æ—Ç–≤–µ—Ç—ã!
      </p>
      <a href="/dashboard/project/new/" class="btn btn-primary" style="font-size: 1rem; padding: 0.75rem 1.5rem;">–°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å</a>
    </div>
  {% endif %}
{% endblock %}